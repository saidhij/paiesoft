<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="structure_type_employe_maroc_exon" model="hr.payroll.structure.type">
        <field name="name">Paie Maroc</field>
        <field name="country_id" ref="base.ma"/>
    </record>

    <!-- Salary Structure -->
    <record id="hr_payroll_salary_structure_employe_exon" model="hr.payroll.structure">
        <field name="name">Paie Maroc</field>
        <field name="country_id" ref="base.ma"/>
        <field name="type_id" ref="structure_type_employe_maroc_exon"/>

    </record>

    <!-- HR SALARY RULES-->
	
	
	
	    <!-- <function model="hr.salary.rule" name="write"> -->
        <!-- <value model="hr.salary.rule" search="[ -->
            <!-- ('struct_id', '=', ref('hr_payroll_ma_pro.hr_payroll_salary_structure_employe_exon')), -->
            <!-- ('code', '=', 'BASIC')]"/> -->
        <!-- <value eval="{ -->
            <!-- 'code': 'BASE', -->
            <!-- 'name': 'Salaire de base mensuel',			 -->
            <!-- 'sequence': 1 -->
			<!-- }"/> -->
			
    <!-- </function> -->
	
        <record id="hr_rule_basic_mensue" model="hr.salary.rule">
            <field name="name">Salaire de base mensuel</field>
            <field name="sequence">1</field>
            <field name="code">BASE</field>
            <field name="category_id" ref="hr_payroll.BASIC"/>
		<field name="condition_select">python</field>
		<field name="condition_python">result = contract.mode_pay=='monthly' and contract.wage>0 </field>
            <field name="amount_select">code</field>
        <field name="amount_python_compute">result = contract.wage 	
	    </field>			
        <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>		  
	  
	  </record>		
  
	  
        <record id="hr_rule_basic_hor" model="hr.salary.rule">
            <field name="name">Salaire de base horaire</field>
            <field name="sequence">1</field>
            <field name="code">BASE</field>
            <field name="category_id" ref="hr_payroll.BASIC"/>
		<field name="condition_select">python</field>
		<field name="condition_python">result = contract.mode_pay=='hourly' and contract.wageh>0 </field>
            <field name="amount_select">code</field>

        <field name="amount_python_compute">
		
if employee.presence_impor == True: 
    result = contract.wageh*(worked_days.WORK100 and worked_days.WORK100.number_of_hours)
else : 
    result = contract.wageh*employee.hrs_trav_cemois

	    </field>			
        <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>		  
	  
	  </record>	  

    <record id="hr_rule_new_worked_hours" model="hr.salary.rule">
        <field name="name">Heures travaillées</field>
        <field name="category_id" ref="other_totals"/>
        <field name="code">WHOURS</field>
        <field name="sequence">3</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.mode_pay=='hourly' </field>		
        <field name="appears_on_payslip" eval="True"/>
    	<field name="amount_select">code</field>
        <field name="amount_python_compute">
		
if employee.presence_impor == True: 
    result = worked_days.WORK100 and worked_days.WORK100.number_of_hours
else : 
    result = employee.hrs_trav_cemois		
		
		 </field>
		
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
    </record>	
	
    <record id="hr_rule_new_worked_days" model="hr.salary.rule">
        <field name="name">Jours travaillés</field>
        <field name="category_id" ref="other_totals"/>
        <field name="code">WDAYS</field>
        <field name="sequence">4</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.mode_pay=='monthly'</field>		
        <field name="appears_on_payslip" eval="True"/>
    	<field name="amount_select">code</field>
        <field name="amount_python_compute">
if employee.presence_impor == True: 
    result = worked_days.WORK100 and worked_days.WORK100.number_of_days
else : 
    result = employee.jrs_trav_cemois 		
		
		 </field>		

		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
    </record>


<record id="hr_payroll_hs25" model="hr.salary.rule">
            <field name="code">HS25</field>
            <field name="name">Heures supplémentaires +25%</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = employee.heure_25>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = employee.heure_25*contract.wageh*1.25</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="10"/>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

<record id="hr_payroll_hs50" model="hr.salary.rule">
            <field name="code">HS50</field>
            <field name="name">Heures supplémentaires +50%</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = employee.heure_50>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = employee.heure_50*contract.wageh*1.5</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="11"/>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
		
<record id="hr_payroll_hs100" model="hr.salary.rule">
            <field name="code">HS100</field>
            <field name="name">Heures supplémentaires +100%</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = employee.heure_100>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = employee.heure_100*contract.wageh*2</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="12"/>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		


		

<record id="hr_payroll_penc" model="hr.salary.rule">
            <field name="code">PENC</field>
            <field name="name">Prime d'Encadrement</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.prime_encad>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.prime_encad</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="10"/>
            <field name="note">Prime d'encadrement-taxable.</field>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

			<record id="hr_payroll_PREND" model="hr.salary.rule">
            <field name="code">PREND</field>
            <field name="name">Prime de Rendement</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.prime_rend>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.prime_rend</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="11"/>
            <field name="note">Prime de rendement taxable.</field>
			  <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
			<record id="hr_payroll_PNUIT" model="hr.salary.rule">
            <field name="code">PNUIT</field>
            <field name="name">Prime de Nuit</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.prime_nuit>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.prime_nuit</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="12"/>
            <field name="note">Prime de nuit taxable.</field>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
			 
        </record>		
		

			<record id="hr_payroll_P13M" model="hr.salary.rule">
            <field name="code">P13M</field>
            <field name="name">Prime 13 ième mois</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.prime_ann==True</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.wage</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="13"/>
            <field name="note">Prime de 13 mois taxable.</field>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
		
			<record id="hr_payroll_PBILAN" model="hr.salary.rule">
            <field name="code">PBILAN</field>
            <field name="name">Prime du Bilan</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.prime_bilan>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.prime_bilan</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="14"/>
            <field name="note">Prime de bilan taxable.</field>
			  <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
			<record id="hr_payroll_COMV" model="hr.salary.rule">
            <field name="code">COMV</field>
            <field name="name">Commission sur ventes</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.com>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.com</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="15"/>
            <field name="note">Commission sur ventes taxable </field>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		

			<record id="hr_payroll_PANTX" model="hr.salary.rule">
            <field name="code">PANTX</field>
            <field name="name">Autres Primes Annuelles Taxables</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.prime_annut>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.prime_annut</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="17"/>
            <field name="note">Autre Prime Annuelle taxable.</field>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
			<record id="hr_payroll_PAMTX" model="hr.salary.rule">
            <field name="code">PAMTX</field>
            <field name="name">Autres Primes mensuelles Taxables</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.prime_tax>0</field>
			<field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.prime_tax</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="16"/>
            <field name="note">Autre Prime mensuelle taxable.</field>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		


<!-- primes exoneres -->

		
			<record id="hr_salary_rule_IDEPL" model="hr.salary.rule">
            <field name="code">IDEPL</field>
			<field name="note">NAT_ELEM_EXO_1</field>
            <field name="name">Indemnité de Déplacement(pièces justificatives)</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_depl>0 </field>
            <field name="amount_python_compute">result = contract.indem_depl</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="21"/>
			 <field name="struct_id" ref="hr_payroll_ma_pro.hr_payroll_salary_structure_employe_exon"/>	
            </record>
			
			<record id="hr_salary_rule_IDEPLP" model="hr.salary.rule">
            <field name="code">IDEPLP</field>
			<field name="note">NAT_ELEM_EXO_2</field>
            <field name="name">Indemnité de Déplacements ponctuels (base forfaitaire)</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_depl2>0 </field>
            <field name="amount_python_compute">result = contract.indem_depl2</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="22"/>
			  <field name="struct_id" ref="hr_payroll_ma_pro.hr_payroll_salary_structure_employe_exon"/>	
			 
        </record>	

			<record id="hr_salary_rule_IDEPLR" model="hr.salary.rule">
            <field name="code">IDEPLR</field>
			<field name="note">NAT_ELEM_EXO_3</field>
            <field name="name">Indemnité de Déplacements réguliers (base forfaitaire)</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_depl3>0 </field>
            <field name="amount_python_compute">result = contract.indem_depl3</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="23"/>
		  <field name="struct_id" ref="hr_payroll_ma_pro.hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
				<record id="hr_salary_rule_IKILO" model="hr.salary.rule">
            <field name="code">IKILO</field>
			<field name="note">NAT_ELEM_EXO_4</field>
            <field name="name">Indemnité Kilométrique</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_kilo>0 </field>
            <field name="amount_python_compute">result = contract.indem_kilo</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="24"/>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		


		<record id="hr_salary_rule_ptru" model="hr.salary.rule">
            <field name="code">PTRU</field>
			<field name="note">NAT_ELEM_EXO_5</field>
            <field name="name">Indemnité de Transport P.urbain</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_transp>0 </field>
            <field name="amount_python_compute">result = contract.indem_transp</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="25"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>


		<record id="hr_salary_rule_ptrh" model="hr.salary.rule">
            <field name="code">PTRH</field>
			<field name="note">NAT_ELEM_EXO_6</field>
            <field name="name">Indemnité de Transport Hors.P.urbain</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_transp2>0 </field>
            <field name="amount_python_compute">result = contract.indem_transp2</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="26"/>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>


	    <record id="hr_salary_rule_PTOUR" model="hr.salary.rule">
            <field name="code">PTOUR</field>
			<field name="note">NAT_ELEM_EXO_7</field>
            <field name="name">Prime de Tournée</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_tourn>0 </field>
            <field name="amount_python_compute">result = contract.prime_tourn</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="27"/>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
				<record id="hr_salary_rule_ICAIS" model="hr.salary.rule">
            <field name="code">ICAIS</field>
			<field name="note">NAT_ELEM_EXO_8</field>
            <field name="name">Indemnité de Caisse</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_caisse>0 </field>
            <field name="amount_python_compute">result = contract.indem_caisse</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="28"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>


		
		<record id="hr_salary_rule_repr" model="hr.salary.rule">
            <field name="code">PR</field>
			<field name="note">NAT_ELEM_EXO_9</field>
            <field name="name">Indemnité de Représentation</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_repr>0 </field>
            <field name="amount_python_compute">result = contract.prime_repr</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="29"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
			<record id="hr_salary_rule_POUT" model="hr.salary.rule">
            <field name="code">POUT</field>
			<field name="note">NAT_ELEM_EXO_11</field>
            <field name="name">Prime d'Outillage</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_outil>0 </field>
            <field name="amount_python_compute">result = contract.prime_outil</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="30"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
		<record id="hr_salary_rule_saliss" model="hr.salary.rule">
            <field name="code">PS</field>
			<field name="note">NAT_ELEM_EXO_12</field>
            <field name="name">Prime de Salissure</field>
			<field name="condition_select">python</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_saliss>0 </field>
            <field name="amount_python_compute">result = contract.prime_saliss </field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="31"/>
	 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
			<record id="hr_salary_rule_ILAIT" model="hr.salary.rule">
            <field name="code">ILAIT</field>
			<field name="note">NAT_ELEM_EXO_13</field>
            <field name="name">Indemnité de Lait</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_lait>0 </field>
            <field name="amount_python_compute">result = contract.indem_lait</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="32"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

				<record id="hr_salary_rule_ppan" model="hr.salary.rule">
            <field name="code">PPAN</field>
			<field name="note">NAT_ELEM_EXO_14</field>
            <field name="name">Prime de Panier ou de casse croute</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_panier>0 </field>
            <field name="amount_python_compute">result = min(contract.prime_panier,((contract.employee_id.company_id.smig/191)*2*26))</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="33"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

			<record id="hr_salary_rule_rint" model="hr.salary.rule">
            <field name="code">RINT</field>
			<field name="note">NAT_ELEM_EXO_16</field>
            <field name="name">Réduction d'intérêt</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.reduc_interet>0 </field>
            <field name="amount_python_compute">result = contract.reduc_interet</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="34"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

			<record id="hr_salary_rule_gsoc" model="hr.salary.rule">
            <field name="code">GSOC</field>
			<field name="note">NAT_ELEM_EXO_17</field>
            <field name="name">Gratifications sociales</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.gratif_sociale>0 </field>
            <field name="amount_python_compute">result = contract.gratif_sociale</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="35"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>



			<record id="hr_salary_rule_PHAJ" model="hr.salary.rule">
            <field name="code">PHAJ</field>
			<field name="note">NAT_ELEM_EXO_18</field>
            <field name="name">Prime de voyage à la Mecque</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_haj>0 </field>
            <field name="amount_python_compute">result = contract.prime_haj</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="36"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
			<record id="hr_salary_rule_aenf" model="hr.salary.rule">
            <field name="code">AENF</field>
			<field name="note">NAT_ELEM_EXO_19</field>
            <field name="name">Allocation versée aux enfants des travailleurs</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.alloc_enfants>0 </field>
            <field name="amount_python_compute">result = contract.alloc_enfants</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="37"/>
			  <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
			<record id="hr_salary_rule_itdem" model="hr.salary.rule">
            <field name="code">ITDEM</field>
			<field name="note">NAT_ELEM_EXO_20</field>
            <field name="name">Indemnité de déménagement</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_demang>0 </field>
            <field name="amount_python_compute">result = contract.indem_demang</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="38"/>
				 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
        </record>

		<record id="hr_salary_rule_tel" model="hr.salary.rule">
            <field name="code">TEL</field>
			<field name="note">NAT_ELEM_EXO_21</field>
            <field name="name">Dépenses relatives aux postes de téléphone</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.deptelepho>0 </field>
            <field name="amount_python_compute">result = contract.deptelepho</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="39"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>


		<record id="hr_salary_rule_bnour" model="hr.salary.rule">
            <field name="code">BNOUR</field>
			<field name="note">NAT_ELEM_EXO_22</field>
            <field name="name">Bons de Nourriture</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.bon_nour>0 </field>
            <field name="amount_python_compute">result = contract.bon_nour</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="40"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>



		<record id="hr_salary_rule_AIDMED" model="hr.salary.rule">
            <field name="code">AIDMED</field>
			<field name="note">NAT_ELEM_EXO_23</field>
            <field name="name">Aide médicale</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.aide_medicale>0 </field>
            <field name="amount_python_compute">result = contract.aide_medicale</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="41"/>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

		<record id="hr_salary_rule_INDLIC" model="hr.salary.rule">
            <field name="code">INDLIC</field>
			<field name="note">NAT_ELEM_EXO_24</field>
            <field name="name">Indemnité de licenciement </field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.indem_licen>0 </field>
            <field name="amount_python_compute">result = contract.indem_licen</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="42"/>
	        <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
	
<record id="hr_salary_rule_GRATIF" model="hr.salary.rule">
            <field name="code">GRATIF</field>
			<field name="note">result = contract.gratif_sociale_code</field>
            <field name="name">Gratifications Sociales</field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.gratif_sociale>0 </field>
            <field name="amount_python_compute">result = min(contract.gratif_sociale,2500)</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="44"/>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
		<record id="hr_salary_rule_APRM" model="hr.salary.rule">
            <field name="code">APRM</field>
			<field name="note">NAT_ELEM_EXO_25</field>
            <field name="name">Autres Primes Exonérées </field>
            <field name="category_id" ref="INDMNT"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_ntax>0 </field>
            <field name="amount_python_compute">result = contract.prime_ntax</field>
			<field name="appears_on_payslip" eval="True"/>
            
            <field name="sequence" eval="43"/>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
		<record id="hr_salary_rule_frlog" model="hr.salary.rule">
            <field name="code">FRLOG</field>
            <field name="name">Frais de logement</field>
            <field name="category_id" ref="PRNATURE"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.frais_loge>0 </field>
            <field name="amount_python_compute">result = contract.frais_loge</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="50"/>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

		<record id="hr_salary_rule_frelec" model="hr.salary.rule">
            <field name="code">FRELEC</field>
            <field name="name">Frais eau et électricité</field>
            <field name="category_id" ref="PRNATURE"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.frais_conso1>0 </field>
            <field name="amount_python_compute">result = contract.frais_conso1</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="51"/>
		    <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
		<record id="hr_salary_rule_frtel" model="hr.salary.rule">
            <field name="code">FRTEL</field>
            <field name="name">Frais Téléphone et Internet</field>
            <field name="category_id" ref="PRNATURE"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.frais_conso2>0 </field>
            <field name="amount_python_compute">result = contract.frais_conso2</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="52"/>
	        <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>

		<record id="hr_salary_rule_frdom" model="hr.salary.rule">
            <field name="code">FRDOM</field>
            <field name="name">Frais de domesticité</field>
            <field name="category_id" ref="PRNATURE"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.frais_conso3>0 </field>
            <field name="amount_python_compute">result = contract.frais_conso3</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="53"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
		<record id="hr_salary_rule_frimp" model="hr.salary.rule">
            <field name="code">FRIMP</field>
            <field name="name">Impôts personnels</field>
            <field name="category_id" ref="PRNATURE"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.frais_conso4>0 </field>
            <field name="amount_python_compute">result = contract.frais_conso4</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="54"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>		
		
		<record id="hr_salary_rule_frcarb" model="hr.salary.rule">
            <field name="code">FRCARB</field>
            <field name="name">Véhicule et carburant</field>
            <field name="category_id" ref="PRNATURE"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.frais_conso5>0 </field>
            <field name="amount_python_compute">result = contract.frais_conso5</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="55"/>
			 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>
		
		<record id="hr_salary_rule_nature" model="hr.salary.rule">
            <field name="code">FNATURE</field>
            <field name="name">Autres frais en nature</field>
            <field name="category_id" ref="PRNATURE"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = contract.prime_nature>0 </field>
            <field name="amount_python_compute">result = contract.prime_nature</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence" eval="56"/>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
        </record>


	<record id="hr_payroll_rules_ded_sum_indmnt" model="hr.salary.rule">
        <field name="category_id" ref="other_totals"/>
        <field name="name">Total des indemnités exonérées</field>
        <field name="code">TINDMNT</field>
        <field name="sequence">60</field>
        <field name="amount_select">code</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = categories.INDMNT >0</field>		
       <field name="amount_python_compute">result = categories.INDMNT</field>
        <field name="appears_on_payslip" eval="False"/>
		<field name="struct_id" ref="hr_payroll_ma_pro.hr_payroll_salary_structure_employe_exon"/>	
    </record>	
	
		<record id="hr_payroll_rules_sum_indmt" model="hr.salary.rule">
        <field name="category_id" ref="other_totals"/>
        <field name="name">Total primes non exonérés </field>
        <field name="code">TPRIMENE</field>
        <field name="sequence">61</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = categories.INDM >0</field>
        <field name="amount_select">code</field>
       <field name="amount_python_compute">result = categories.INDM</field>
        <field name="appears_on_payslip" eval="False"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
    </record>	
		

	<record id="hr_payroll_rules_avantage" model="hr.salary.rule">
        <field name="category_id" ref="other_totals"/>
        <field name="name">Total avantages en nature </field>
        <field name="code">TAVANTAGE</field>
        <field name="sequence">62</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result =  categories.PRNATURE > 0 </field>
        <field name="amount_select">code</field>
       <field name="amount_python_compute">result = categories.PRNATURE</field>
        <field name="appears_on_payslip" eval="False"/>
		 <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
    </record>
	
	<record id="hr_payroll_anc" model="hr.salary.rule">
			<field name="name">Prime d'ancienneté</field>
			<field name="category_id" ref="hr_payroll.ALW"/>
			<field name="code">ANC</field>
			<field name="sequence">3</field>
			<field name="condition_select">python</field>
			<field name="condition_python">result = contract.anciennete &gt;= 2 </field>
			<field name="amount_select">code</field>
			<field name="amount_python_compute">result = (((categories.BASE)*0.35) if contract.anciennete &gt;= 65 
else (categories.BASE )*0.20 if ((contract.anciennete &gt;= 20.001) and (contract.anciennete &lt;= 25))			
else (categories.BASE )*0.15 if ((contract.anciennete &gt;= 12.001) and (contract.anciennete &lt;= 20)) 
else (categories.BASE )*0.10 if ((contract.anciennete &gt;= 5.001) and (contract.anciennete &lt;= 12)) 
else (categories.BASE )*0.050 if((contract.anciennete &gt;= 2) and (contract.anciennete &lt;= 5))  
else -0)
    </field>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
	</record>	
		
		


		<record id="hr_rule_abs_h" model="hr.salary.rule">
            <field name="code">ABSH</field>
            <field name="name">Absence en heures</field>
            <field name="category_id" ref="other_totals"/>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.absence >0</field>
        <field name="amount_select">code</field>
       <field name="amount_python_compute">result = contract.absence</field>
			<field name="appears_on_payslip" eval="True"/>
            <field name="sequence">2</field>
	       <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
        </record>	
	   
        <record id="hr_rule_basic_percentage" model="hr.salary.rule">
            <field name="name">Pourcentage de base relatif</field>
            <field name="sequence" eval="2"/>
            <field name="code">BASEP</field>
            <field name="category_id" ref="BASEP"/>
		<field name="condition_select">python</field>
		<field name="condition_python">result = contract.wage>0 or contract.wageh>0 </field>
            <field name="amount_select">code</field>
        <field name="amount_python_compute">
	
result = (((worked_days.WORK100 and worked_days.WORK100.number_of_days)/employee.jours_t) if contract.mode_pay=='monthly' and  employee.presence_impor == True
else (employee.jrs_trav_cemois /employee.jours_t) if (contract.mode_pay=='monthly' and  employee.presence_impor == False)

else 1)

	    </field>
           <field name="appears_on_payslip" eval="False"/>	
		  <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
        </record>


    <function model="hr.salary.rule" name="write">
        <value model="hr.salary.rule" search="[
            ('struct_id', '=', ref('hr_payroll_ma_pro.hr_payroll_salary_structure_employe_exon')),
            ('code', '=', 'GROSS')]"/>
        <value eval="{
            'name': 'Salaire Brut',
            'code': 'BRUT',
            'sequence': 100,
            'category_id': ref('hr_payroll.GROSS'),
            'amount_python_compute': 'result =  (categories.BASE+categories.PRNATURE +categories.INDMNT+categories.INDM)* categories.BASEP'}"/>
    </function>


	<!-- <record id="hr_tot_traitementetsalaires" model="hr.salary.rule"> -->
        <!-- <field name="category_id" ref="hr_payroll.GROSS"/> -->
        <!-- <field name="name">Total Salaire Brut</field> -->
        <!-- <field name="code">BRUT</field> -->
        <!-- <field name="sequence">100</field> -->
        <!-- <field name="condition_select">python</field> -->
		<!-- <field name="condition_python">result =  categories.BASE > 0 </field> -->
        <!-- <field name="amount_select">code</field> -->
       <!-- <field name="amount_python_compute">result = (categories.BASE+categories.PRNATURE +categories.INDMNT+categories.INDM)* categories.BASEP</field> -->
        <!-- <field name="appears_on_payslip" eval="True"/> -->
		<!-- <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/> -->
    <!-- </record> -->

	<record id="hr_tot_sbi" model="hr.salary.rule">
        <field name="category_id" ref="SBI"/>
        <field name="name">Salaire Brut soumis</field>
        <field name="code">SBI</field>
        <field name="sequence">101</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result =  categories.BASE > 0 </field>
        <field name="amount_select">code</field>
       <field name="amount_python_compute">result = (categories.BASE+categories.PRNATURE +categories.INDM) * categories.BASEP</field>
        <field name="appears_on_payslip" eval="False"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>		
    </record>


    	<record id="hr_payroll_rules_CNSS1" model="hr.salary.rule">
        <field name="category_id" ref="SALC"/>
        <field name="name">Cotisation CNSS salariale</field>
        <field name="code">CNSS</field>
        <field name="sequence">200</field>
		<field name="condition_select">python</field>
		<field name="condition_python">result = contract.type_ctr=='CDD' or contract.type_ctr=='CDI'or contract.type_ctr=='CTD'</field>
		<field name="amount_select">code</field>
        <field name="amount_python_compute">result = (contract.employee_id.company_id.t_sal*min(SBI,contract.employee_id.company_id.plafond_secu))/100</field>
        <field name="appears_on_payslip" eval="True"/>
        <field name="partner_id" ref="hr_CNSS_register"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>			
    </record> 

	<record id="hr_payroll_rules_AMO_employe" model="hr.salary.rule">
        <field name="category_id" ref="SALC"/>
        <field name="name">Cotisation AMO salariale</field>
        <field name="code">AMO</field>
        <field name="sequence">201</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.type_ctr=='CDD' or contract.type_ctr=='CDI'or contract.type_ctr=='CTD'</field>
        <field name="amount_select">code</field>
		<field name="amount_python_compute">result = (contract.employee_id.company_id.tamo_sal*SBI)/100</field>
        <field name="appears_on_payslip" eval="True"/>
         <field name="partner_id" ref="hr_CNSS_register"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>	
    </record>
	
	 <record id="hr_payroll_rules_CNSS_employer" model="hr.salary.rule">
        <field name="category_id" ref="COMP"/>
        <field name="name">Cotisation CNSS patronale</field>
        <field name="code">CNSSP</field>
        <field name="sequence">202</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.type_ctr=='CDD' or contract.type_ctr=='CDI'or contract.type_ctr=='CTD'</field>
		<field name="amount_select">code</field>
        <field name="amount_python_compute">result = (contract.employee_id.company_id.t_pat*min(SBI,contract.employee_id.company_id.plafond_secu))/100</field> 
          <field name="partner_id" ref="hr_CNSS_register"/>
		<field name="appears_on_payslip" eval="True"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>			
    </record>

	




        <record id="hr_payroll_rules_AMO_employer" model="hr.salary.rule">
        <field name="category_id" ref="COMP"/>
        <field name="name">Cotisation AMO patronale</field>
        <field name="code">AMOP</field>
        <field name="sequence">203</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.type_ctr=='CDD' or contract.type_ctr=='CDI'or contract.type_ctr=='CTD'</field>
        <field name="amount_select">code</field>
		<field name="amount_python_compute">result = (contract.employee_id.company_id.tamo_pat*SBI)/100</field>
         <field name="partner_id" ref="hr_CNSS_register"/>
		<field name="appears_on_payslip" eval="True"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>			
    </record>
	
	<record id="hr_payroll_rules_AMOP_employer" model="hr.salary.rule">
        <field name="category_id" ref="COMP"/>
        <field name="name">Participation AMO patronale</field>
        <field name="code">AMOPA</field>
        <field name="sequence">204</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.type_ctr=='CDD' or contract.type_ctr=='CDI'or contract.type_ctr=='CTD'</field>
        <field name="amount_select">code</field>
		<field name="amount_python_compute">result = (contract.employee_id.company_id.tamopar_pat*SBI)/100</field>
        <field name="partner_id" ref="hr_CNSS_register"/>
		<field name="appears_on_payslip" eval="True"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>			
    </record>
	
	
	
	<record id="hr_payroll_rules_frais_pro" model="hr.salary.rule">
        <field name="category_id" ref="COMP"/>
        <field name="name">Frais de Formation Professionnelle</field>
        <field name="code">FPRO</field>
        <field name="sequence">205</field>
        <field name="condition_select">python</field>
		<field name="condition_python">result = contract.type_ctr=='CDD' or contract.type_ctr=='CDI'or contract.type_ctr=='CTD'</field>
		<field name="amount_select">code</field>
        <field name="amount_python_compute">result = (contract.employee_id.company_id.t_formpro*SBI)/100</field>
        <field name="appears_on_payslip" eval="True"/>
        <field name="partner_id" ref="hr_CNSS_register"/>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>		
        </record>
		
	
    <record id="hr_rule_total_charges_salariales" model="hr.salary.rule">
        <field name="name">Total des charges salariales</field>
        <field name="sequence">2510</field>
        <field name="code">SALC</field>
        <field name="category_id" ref="other_totals"/>
        <field name="appears_on_payslip" eval="False"/>
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">result = categories.SALC</field>
		<field name="note">Cette valeur représente la somme de toutes les charges salariales.</field>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
    </record>


    <record id="hr_rule_total_retenues" model="hr.salary.rule">
        <field name="name">Total Retenues</field>
        <field name="sequence">99999</field>
        <field name="category_id" ref="other_totals"/>
        <field name="code">RET</field>
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="appears_on_payslip" eval="False"/>
        <field name="amount_python_compute">result = categories.RETENUES</field>
		<field name="note">Cette règle mais en valeur la somme de toutes les retenues.</field>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
    </record>
	

		  <record id="hr_salary_rule_av_sal" model="hr.salary.rule">
            <field name="code">AVS</field>
			<field name="name">Avance sur salaire</field>
			<field name="sequence">9999913</field>
            <field name="category_id" ref="AVSAL"/>
			<field name="condition_select">python</field>
			<field name="amount_select">code</field>
			<field name="condition_python">result = employee.avance>0</field>
            <field name="amount_python_compute">result = employee.avance</field>
			<field name="appears_on_payslip" eval="True"/>
			<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
            <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
     
     </record>


    <record id="hr_rule_total_charges_patronales" model="hr.salary.rule">
        <field name="name">Total Charges Patronales</field>
        <field name="sequence">150000</field>
        <field name="code">TCOMP</field>
        <field name="category_id" ref="other_totals"/>
        <field name="appears_on_payslip" eval="False"/>
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">result = categories.COMP</field>
		<field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
		<field name="note">la somme des charges patronales.</field>
    </record>

    <record id="hr_rule_total" model="hr.salary.rule">
        <field name="name">Cout total pour l'entreprise</field>
        <field name="sequence">200000</field>
        <field name="code">TOTAL</field>
        <field name="category_id" ref="TOTAL"/>
        <field name="appears_on_payslip" eval="False"/>
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">result = categories.BRUT + categories.COMP</field>
		<field name="note">le coût total de l'entreprise qui est la somme du salaire brut et les cotisations patronales. </field>
    <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
	
	</record>
	

    <function model="hr.salary.rule" name="write">
        <value model="hr.salary.rule" search="[
            ('struct_id', '=', ref('hr_payroll_ma_pro.hr_payroll_salary_structure_employe_exon')),
            ('code', '=', 'NET')]"/>
        <value eval="{
            'name': 'Net',
            'sequence': 90000006,
            'category_id': ref('hr_payroll.NET'),
            'amount_python_compute': 'result = round(categories.BRUT - categories.RETENUES - categories.AVSAL)',
            }"/>
    </function>

    <record id="rule_employee_cadre_total_charges_patronales" model="hr.salary.rule">
        <field name="name">Total Charges Patronales</field>
        <field name="sequence">150000</field>
        <field name="code">TCOMP</field>
        <field name="category_id" ref="other_totals"/>
        <field name="appears_on_payslip" eval="False"/>
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">result = categories.COMP</field>
        <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
    </record>

    <record id="rule_employee_cadre_total" model="hr.salary.rule">
        <field name="name">Cout total pour l'entreprise</field>
        <field name="sequence">200000</field>
        <field name="code">TOTAL</field>
        <field name="category_id" ref="TOTAL"/>
        <field name="appears_on_payslip" eval="False"/>
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">result = categories.BRUT + categories.COMP</field>
        <field name="struct_id" ref="hr_payroll_salary_structure_employe_exon"/>
    </record>

</odoo>

<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="report_l10n_ma_fiche_paye">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
          <t t-call="web.basic_layout">

            <div class="page">
                <style>
				
                    .cadre11 {

                    font-size: x-large;
                    border:2px solid #E2E2E0;
                    padding: 1%;
                    width: 420px;
                    height: 50px;
                    background-color : #E2E2E0;
                    vertical-align: baseline;
                    font-family:Calibri;
                    }
                    .cadre2 {
                    font-size: small;
                    border:1px solid #E2E2E0;
                    padding: 1%;
                    width: 100%;
                    text-align:left;
                    background-color : #E2E2E0;
                    font-family:Calibri;
                    }
                    .periode {
                    font-size:small;
                    font-family:Calibri;
                    }
                    .font{

                    font: 80% sans-serif;
                    }

                    td {padding:1%;border:1px solid #E2E2E0;text-align:right;font: 90% sans-serif; font-family:Calibri;
                    }
                    th {text-align:center;font-weight:bold;border:1px solid #E2E2E0; font-family: Calibri, Helvetica,
                    sans-serif;}
                    .centrer_th {padding:0.3%; background-color: #E5E5E5;font-weight: normal;}

                    .tableau3 {
                    border-radius: 10px;
                    width: 420px;
                    border:1px solid #E2E2E0;
                    font-family:Calibri, Arial, "Arial Black",Arial, Verdana, sans-serif;
                    }
                    .no_border_top {border-top:0px;}
                    .no_border_bottom {border-bottom:0px;}
                    .no_border {border:0;}
                    .tableau2{
                    font-family:Calibri;
                    border:1px solid #6D6D6D;
                    width: 332px;
                    background-color: #EBEBEB;
                    }
                    .tableau6{
                    width:100%
                    border:solid white 1px;
                    font-family:Calibri;
                    width: 332px;
                    }
                    .t2, .t2_center {
                    border : white;
                    }
                    .t2_center{
                    text-align: center;
                    }
                    .top_20px{
                    margin-top:20px;
                    }
                    .top_150px{
                    margin-top:150px;
                    }
                    .top_20px{
                    margin-top:20px;
                    }
                    .centrer{
                    text-align:center;
                    }
                    .droite{
                    text-align:right;
                    }
                    .gauche{
                    text-align:left;
                    }


                    .tableau1 {
                    width: 100%;
                    margin-top:20px;
                    border:0.5px solid #E2E2E0;
                    font-family:Calibri, Arial, "Arial Black",Arial, Verdana, sans-serif;
                    }


                    table {
                    border-collapse:separate;
                    border:solid #E2E2E0 1px;
                    border-radius:6px;
                    -moz-border-radius:6px;
                    }


                </style>

                <div class="oe_structure"/>
         
                   

    <table class="table table-bordered"  style="font-family:Calibri;font-size: medium; border:solid black 1px;">

	<TR style="font-family:Calibri;font-size: medium; border:solid black 1px;"><TH style="font-family:Calibri;font-size: medium; border:solid black 1px;" bgcolor="#e4ec94" colspan="4" class="cadre11" ><h2 >BULLETIN DE PAIE</h2><P><span t-field="o.number"/></P></TH><TH style="font-family:Calibri;font-size: medium; border:solid black 1px;text-align:left;" colspan="6" ><P>Du: <span style="font-family:Verdana;font-size: small" t-field="o.date_from"/></P><P>  Au: <span style="font-family:Verdana;font-size: small" t-field="o.date_to"/></P></TH><TH style="font-family:Calibri;font-size: medium; border:solid black 1px;" colspan="6" ><P style="text-align:left">Mode de paiement:  <span style="font-family:Verdana;font-size: small" t-esc="o.contract_id.payment_mode"/></P></TH></TR>

	<TR style="font-family:Calibri;font-size: medium; border:solid black 1px;"><TD style="font-family:Calibri;font-size: medium; border:solid black 1px;text-align:left;border-radius: 10px" rowspan="4"  colspan="4" ><h3><span style="font-family:Verdana;font-size: small" t-field="o.employee_id.company_id.name"/></h3><P><span style="font-family:Verdana;font-size: small" t-field="o.employee_id.company_id.street"/></P><span style="font-family:Verdana;font-size: small" t-field="o.employee_id.company_id.street2"/><P><span style="font-family:Verdana;font-size: small" t-field="o.employee_id.company_id.city"/></P><P>N°IF: <span style="font-family:Verdana;font-size: small" t-field="o.employee_id.company_id.idfiscal"/></P><P>N°CNSS:<span style="font-family:Verdana;font-size: small" t-esc="o.employee_id.company_id.org_ss"/></P></TD>
	<TR style="font-family:Calibri;font-size: medium; border:solid black 1px;">
	<TH style="font-family:Calibri;font-size: medium; border:solid black 1px;text-align:left" colspan="6" ><h3><span t-field="o.employee_id.name"/></h3><P style="text-align:left ;font-family:Verdana;font-size: small"><div t-field="o.employee_id.address_home_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/></P></TH>
	<TH  colspan="6" style="border:solid black 1px"><P style="text-align:left">Matricule: <span style="font-family:Verdana;font-size: small" t-field="o.employee_id.code2"/></P><P style="text-align:left">Département: <span style="font-family:Verdana;font-size: small" t-field="o.employee_id.department_id"/></P><P style="text-align:left">Fonction: <span style="font-family:Verdana ;font-size: small" t-field="o.employee_id.job_id"/> </P><P style="text-align:left">Embauche: <span style="font-family:Verdana ;font-size: small" t-field="o.contract_id.date_start"/> </P> </TH> </TR>	
	<TH colspan="2" style="font-family:Calibri;font-size: medium; border:solid black 1px;" >N°cnss</TH><TH colspan="2" style="font-family:Calibri;font-size: medium; border:solid black 1px;">N°cin:</TH><TH style="font-family:Calibri;font-size: medium; border:solid black 1px;" colspan="2">N°contrat</TH> <TH colspan="2" style="border:solid black 1px">Horaire légal</TH><TH style="border:solid black 1px;" colspan="2" >Ancienneté</TH></TR>
	<TR style="font-family:Calibri;font-size: medium; border:solid black 1px;" > 
	<TD style="border:solid black 1px;" colspan="2" ><span style="font-family:Verdana;font-size: small" t-field="o.employee_id.matricule_cnss"/></TD>
	<TD  style="text-align:center;border:solid black 1px" colspan="2" ><span style="font-family:Verdana;font-size: small" t-field="o.employee_id.cin"/></TD>
	<TD  style="text-align:center;border:solid black 1px" colspan="2"><span style="font-family:Verdana;font-size: small" t-field="o.contract_id.name"/></TD>
	<TD  style="text-align:center;border:solid black 1px" colspan="2" ><span style="font-family:Verdana;font-size: small" /><span style="font-family:Verdana;font-size: small" t-field="o.employee_id.heures_t"/></TD>
	<TD  style="text-align:center;border:solid black 1px" colspan="2" ><span style="font-family:Verdana;font-size: small" t-esc="'%.0f'% o.contract_id.anciennete"/></TD></TR>
	<TR >
	<TH style="font-family:Calibri;font-size: medium; border:solid black 1px;" colspan="4">Congé</TH>
	</TR>
    
	<TR>
	<TD style="text-align:left;border:solid black 1px;" colspan="1">Acquis: <span style="font-family:Verdana;font-size: small" t-field="o.contract_id.leave"/></TD>
	<TD style="text-align:left;border:solid black 1px;" colspan="1">Pris: <span style="font-family:Verdana;font-size: small" t-field="o.contract_id.cpris"/></TD>
	<TD style="text-align:left;border:solid black 1px;" colspan="1" >Restant: <span style="font-family:Verdana;font-size: small" t-field="o.contract_id.crest"/></TD>
</TR>


  </table>
                <table class="table table-condensed" style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                   
                        <tr style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                            <th rowspan="4" class="centrer_th" style="font-family:Calibri;font-size: medium; border:solid black 1px;"><br/>Designation
                            </th>
                            <th rowspan="2" class="centrer_th" style="font-family:Calibri;font-size: medium; border:solid black 1px;"><br/>Base
                            </th>
							
                       
                           <th colspan="2" class="centrer_th" style="font-family:Calibri;font-size: medium; border:solid black 1px;">Part salariale
                            </th>
                        
                            <th colspan="2" class="centrer_th" style="font-family:Calibri;font-size: medium; border:solid black 1px;">Part patronale
                            </th>
                        </tr>
                         <tr style="font-family:Calibri;font-size: medium; border:solid black 1px;">
						<th style="background-color:#EBEBEB !important;font-family:Calibri;font-size: medium; border:solid black 1px;" class="centrer_th">Taux/Quantité</th>
                            <th style="background-color:#EBEBEB !important;font-size: medium; border:solid black 1px;" class="centrer_th">Montant</th>
                            <th style="background-color:#EBEBEB !important;font-size: medium; border:solid black 1px;" class="centrer_th">Taux</th>
                            <th style="background-color:#EBEBEB !important;font-size: medium; border:solid black 1px;" class="centrer_th">Montant</th>
                        </tr>
						
						 <tbody>
                        <tr t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)" t-as="line">
                            <td height="2" class="gauche" style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                                <span t-field="line.name"/>
                            </td>
                            <td height="2" style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                                <t t-if="line.code not in ['COUT','NET','BASE','AMO','AMOP','AMOPA','CNSS','CNSSP','AMOP','FPRO','ALLFAM']">
                                   <span t-esc="'%.2f'% line.amount or ''"/>
                                </t>
                                 <t t-if="line.code  in ['AMO','AMOP','AMOPA','FPRO','ALLFAM']">
                                <span t-esc="'%.2f'% get_total_by_rule_category(o,'SBI')"/>
                                </t>
								
                                 <t t-if="line.code  in ['CNSS','CNSSP']">
                                 <span t-esc="'%.2f'% min((get_total_by_rule_category(o,'SBI')),o.employee_id.company_id.plafond_secu)"/>
                                </t>
								
								  <t t-if="line.code == 'ANC'">
                              	<span t-esc="'%.2f'% o.contract_id.wage"/>
                                </t>
							
                                <t t-if="line.amount_select not in ['code','percentage']">
                                    <span></span>
                                </t>
                            </td>
                            <td style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                                <t t-if="line.code not in ['AMO','AMOP','AMOPA','CNSS','CNSSP','BASE','NET','FPRO','ALLFAM']">
                                    <span>-</span>
                                </t>

							 <t t-if="line.code == 'CNSS'">
                                 
								<span t-esc="'%.2f'% o.employee_id.company_id.t_sal"/> %
                                </t>							
								 <t t-if="line.code == 'AMO'">                            
								<span t-esc="'%.2f'% o.employee_id.company_id.tamo_sal"/> %
                                </t>	

                                <t t-if="line.code  in ['NET']">
								<span></span>
                                </t>
								   <t t-if="line.code == 'ANC'">
								<span t-esc="'%.2f'% o.contract_id.anciennete"/>(ans) 
                                </t>

                            </td>

                            <td style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                                 <t t-if="line.code not in ['AMOP','AMOPA','CNSSP','ALLFAM','FPRO']">
                                      <span t-esc="'%.2f'% line.total or ''"/>
                                </t>
                            </td>
							     <td style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                              	<t t-if="line.code == 'CNSSP'">
                                    <span t-esc="'%.2f'% o.employee_id.company_id.t_pat"/> %
                                </t>
                            
								<t t-if="line.code == 'AMOP'">
                                    <span t-esc="'%.2f'% o.employee_id.company_id.tamo_pat"/> %
                                </t>
								
								<t t-if="line.code == 'AMOPA'">
                                    <span t-esc="'%.2f'% o.employee_id.company_id.tamopar_pat"/> %
                                </t>
                               
								<t t-if="line.code == 'FPRO'">
                                    <span t-esc="'%.2f'% o.employee_id.company_id.t_formpro"/> %
                                </t>
									<t t-if="line.code == 'ALLFAM'">
                                    <span t-esc="'%.2f'% o.employee_id.company_id.t_alloc"/> %
                                </t>						
                            </td>
                            <td style="font-family:Calibri;font-size: medium; border:solid black 1px;">
                                <t t-if="line.code in ['AMOP','AMOPA','CNSSP','FPRO','ALLFAM']">
                                    <span t-esc="'%.2f'% line.total or ''"/>
                                </t>
                            </td>

			
                        </tr>

                    </tbody>
						
						
                   </table>
                <table class="table">
                        <thead>
                            <tr style="background-color:#EBEBEB !important" >
							 <th style="font-family:Calibri;font-size: small; border:solid black 1px;" class="active">Total</th>
                                 <th style="font-family:Calibri;font-size: small; border:solid black 1px;" class="active">Salaire Brut</th>
                                 <th style="font-family:Calibri;font-size: small; border:solid black 1px;" class="active">Cotistions Sociales</th>
                                 <th style="font-family:Calibri;font-size: small; border:solid black 1px;" class="active">Salaire Net</th>
                             
                            </tr>
                        </thead>
						
                        <tbody>
                            <tr>
							    <td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center">Mois</td>
                                <td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center" ><span t-esc="'%.0f'% get_total_by_rule_category(o,'BRUT')"/></td>
                                <td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center" ><span t-esc="'%.0f'% get_total_by_rule_category(o,'SALC')"/></td>
                                <td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center" ><span t-esc="'%.0f'% get_total_by_rule_category(o,'NET')"/></td>
							</tr>  
							<tr>
								<td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center">Année</td>		
                                <td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center" ><span t-esc="'%.0f'% get_annual_total_by_rule_category(o,'BRUT')"/></td>
                                <td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center" ><span t-esc="'%.0f'% get_annual_total_by_rule_category(o,'SALC')"/></td>
                                <td style="font-family:Calibri;font-size: small; border:solid black 1px;" class="text-center" ><span t-esc="'%.0f'% get_annual_total_by_rule_category(o,'NET')"/></td>
							</tr> 
			
							</tbody>
                    </table> 
	
	

                    <p class="mt30">Pour faire valoir vos droits, Conservez ce bulletin de paie sans limitation de durée.</p>
                				
       
         </div>
		  
    </t>   
         </t>  
		  
    </t>
</template>
</odoo>